# Music Download Web Application - Implementation Plan

## Project Overview
Converting a Telegram bot music downloader into a web application where users can:
- Search for songs on a website
- View search results with video thumbnails
- Download videos and audio files

## Current State
- Fresh project with only `.env` Supabase configuration
- Has Vite setup indicated but no actual files
- Python Telegram bot code provided (to be converted)

## Technology Stack - Selected
- **Frontend**: Vanilla JavaScript + HTML/CSS (no heavy framework)
- **Backend**: Supabase Edge Functions (Node.js runtime)
- **Search Logic**: Deno with yt-dlp equivalent
- **Database**: Supabase (for optional tracking)

This matches your existing Vite + Supabase setup in `.env`

## Planned Features

### 1. Frontend (index.html)
- Search bar for song queries
- Display 6 search results with:
  - Video thumbnail image
  - Video title
  - Duration
  - View count
- Two download buttons per result:
  - Download as MP3 (audio only)
  - Download as MP4 (full video)
- Responsive design

### 2. Backend Search & Download Service
- Search YouTube API endpoint
- Download endpoint for video/audio
- Handle file compression for large files
- Serve files to users

### 3. Optional: Database Tracking
- Store search history (optional)
- Track popular downloads (optional)

## Implementation Steps

### Phase 1: Frontend Setup (index.html + CSS/JS)
- Create `index.html` with:
  - Search bar input field
  - Results container (6 grid items)
  - Loading state indicators
  - Error messages
- Add `styles.css` with responsive grid layout
- Add `script.js` with:
  - Search API call function
  - Result display with thumbnails
  - Download button handlers

### Phase 2: Backend Setup (Supabase Edge Functions)
- Create `/functions/search-songs` endpoint:
  - Accept song query parameter
  - Use yt-dlp to search YouTube
  - Return 6 results with thumbnails, title, duration, view count
- Create `/functions/download-media` endpoint:
  - Accept video ID and format (mp3 or mp4)
  - Stream download directly to user
  - Handle large file compression

### Phase 3: UI/UX Polish
- Add loading spinners
- Error handling messages
- Responsive mobile design
- Smooth animations

## Files to Create
- `index.html` - Main web interface
- `styles.css` - Responsive styling
- `script.js` - Frontend logic
- `supabase/functions/search-songs/index.ts` - Search endpoint
- `supabase/functions/download-media/index.ts` - Download endpoint
- `package.json` - Project dependencies
